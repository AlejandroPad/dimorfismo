\documentclass{article}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amssymb, amsmath, amsbsy} % simbolitos
\usepackage{mathdots} % para el comando \iddots
\usepackage{csvsimple}
\usepackage{pythontex}
\usepackage{ragged2e}
\usepackage{adjustbox}
\usepackage{chngpage} %tablas fuera de margenes
\usepackage[margin=1.0in]{geometry}
\renewcommand{\baselinestretch}{1.5}

\begin{pycode}
import json
import csv

##Declaro variables a utilizar 
##Primer archivo

data_processed_1 = '../data/processed/parametros_mejor_modelo_logistico_laal_ig.json'
with open(data_processed_1, encoding='utf8') as results_1_file:
    parametros_mejor = json.load(results_1_file)

m_variables_normalizacion = parametros_mejor ["parametrosNormalizacion"]
m_valor_minimo = m_variables_normalizacion ["valorMinimo"]
m_valor_maximo = m_variables_normalizacion ["valorMaximo"]

m_variables_modelo = parametros_mejor["parametrosModelo"]
m_intercept = m_variables_modelo[0]
m_longitud_craneo = m_variables_modelo[1]
m_altura_pico = m_variables_modelo[2]
m_longitud_pico = m_variables_modelo[3]
m_tarso = m_variables_modelo [4]

#segundo archivo
m_variables_modelo = []
with open('../data/processed/tabla_mejores_modelos.csv') as results_3_file:
    reader = csv.DictReader(results_3_file)
    for row in reader:
        m_variables_modelo.append(row)

\end{pycode}

\begin{document}

\title{Ecuación Logística}
\author{Andrea Sánchez}
\maketitle
\begin{flushleft}

Teniendo la ecuación logística:
\begin{equation}
    \label{tripe_igualdad_sencilla}
    \frac{1}{1+e^{-z}} = \frac{1}{1+\mbox{\mbox{exp}}\left ( -z\right )} = \frac{1}{1+\mbox{\mbox{exp}}\left (-\sum_{i=0}^{n} \beta _{i}N_{i} \right )} ,
\end{equation}

donde, al tener que $N_{0}=1$, entonces podemos expandir la ecuación (\ref{tripe_igualdad_sencilla}) a la forma:
\begin{equation}
    \label{ecuacion_expandida}
    \frac{1}{1+\mbox{exp}\left (-\sum_{i=0}^{n} \beta _{i}N_{i} \right )} = \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N_{1}+...+\beta_{n}N_{n} \right ) \right ]} ,
\end{equation}

que podemos reescribir la ecuación (\ref{ecuacion_expandida}) a la forma :
\begin{equation}
    \label{ecuacion_expandida_reescrita}    
    \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N_{1}+...+\beta_{n}N_{n} \right ) \right ]} = \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N(x_{1})+...+\beta_{n}N(x_{n})\right ) \right ]} .
\end{equation}

Notemos que en la ecuación (\ref{ecuacion_expandida_reescrita}) la normalización $N$ depende de un $x_{i}$. Definimos $A_{i}$ y $B_{i}$ como:

\begin{equation}
    \label{maximos_A}
    A_{i}= \underset{j\in \left \{ 1,...,m \right \}}{\mbox{mín}}\left ( x_{i}^{j} \right )
\end{equation}

\begin{equation}
    \label{minimos_B}
    B_{i}= \underset{j\in \left \{ 1,...,m \right \}}{\mbox{máx}}\left ( x_{i}^{j} \right )
\end{equation}

Donde, en este caso, el superíndice $j$ representa el $j$-ésimo individuo del conjunto de $m$ albatros, mientras que el subíndice $i$ simboliza la $i$-ésima anatomía en medición.

Por lo tanto, sea 
\begin{equation} \label{normalizacion} N\left ( x_{i} \right )= \frac{x_{i} - \underset{j\in [m ]}{\mbox{mín}}\left (  x_{i}^{j}\right )}{\underset{j\in [m ]}{\mbox{máx}}\left (  x_{i}^{j}\right )-\underset{j\in [m ]}{\mbox{mín}}\left (  x_{i}^{j}\right )} .
\end{equation}

Sustituyendo (\ref{normalizacion}) en (\ref{ecuacion_expandida_reescrita}) tenemos que: 
\begin{equation} \label{ecuacion_chorizo}
    \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}\frac{x_{1}- \underset{j\in [m]}{\mbox{mín}}\left (x_{1}^{j}\right )}{\underset{j\in [m ]}{\mbox{máx}}\left (x_{1}^{j}\right )-\underset{j\in [m]}{\mbox{mín}}\left (  x_{1}^{j}\right )}+...+\beta_{n}\frac{x_{n} - \underset{j\in [m]}{\mbox{mín}}\left (  x_{n}^{j}\right )}{\underset{j\in [m]}{\mbox{máx}}\left (  x_{n}^{j}\right )-\underset{j\in [m]}{\mbox{mín}}\left (  x_{n}^{j}\right )}\right ) \right ]} .
\end{equation}


\newpage
%Agregar valores de .csv

\begin{table}[ht]
    \centering
    \caption{Variables predictoras para principales componentes de análisis de ($n$=135) albatros de Laysan en Isla Guadalupe desde 2014-2018.}
    \bigskip
    \begin{adjustbox}{width=1\textwidth}
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
    \textbf{Morfometría} & \textbf{Valor Mínimo} & \textbf{Valor Máximo} & \textbf{Valor Estimado} & \textbf{Error Estándar} & \textbf{Valor Z} & \textbf{Pr($>\left|z\right|$)} \\
    \hline
    (Intercept) & - & - & \py{m_variables_modelo[0]['(Intercept)']} & \py{m_variables_modelo[0]['stdErrIntercept']} & \py{m_variables_modelo[0]['zValueIntercept']} & \py{m_variables_modelo[0]['PrIntercept']}  \\
    \hline
    Longitud Craneo & \py{m_variables_modelo[0]['minlongitudCraneo']} & \py{m_variables_modelo[0]['maxlongitudCraneo']} & \py{m_variables_modelo[0]['Longitud_Craneo']} & \py{m_variables_modelo[0]['stdErrlongitudCraneo']} & \py{m_variables_modelo[0]['zValuelongitudCraneo']} & \py{m_variables_modelo[0]['PrIntercept']}\\
    \hline
    Altura Pico & \py{m_variables_modelo[0]['minAltoPico']} & \py{m_variables_modelo[0]['maxAltoPico']} & \py{m_variables_modelo[0]['Altura_Pico']} & \py{m_variables_modelo[0]['stdErrAltoPico']} & \py{m_variables_modelo[0]['zValueAltoPico']} & \py{m_variables_modelo[0]['PrAltoPico']}\\
    \hline
    Longitud Pico & \py{m_variables_modelo[0]['minLongitudPico']} & \py{m_variables_modelo[0]['maxLongitudPico']} & \py{m_variables_modelo[0]['Longitud_Pico']} & \py{m_variables_modelo[0]['stdErrLongitudPico']} & \py{m_variables_modelo[0]['zValueLongitudPico']} & \py{m_variables_modelo[0]['PrLongitudPico']}\\
    \hline
    Tarso & \py{m_variables_modelo[0]['minTarso']} & \py{m_variables_modelo[0]['maxTarso']} & \py{m_variables_modelo[0]['Tarso']} & \py{m_variables_modelo[0]['stdErrTarso']} & \py{m_variables_modelo[0]['zValueTarso']} & \py{m_variables_modelo[0]['PrTarso']}\\
    \hline
    Ancho Craneo & \py{m_variables_modelo[0]['minAnchoCraneo']} &\py{m_variables_modelo[0]['maxAnchoCraneo']} &\py{m_variables_modelo[0]['Ancho_Craneo']} &\py{m_variables_modelo[0]['stdErrAnchoCraneo']} &\py{m_variables_modelo[0]['zValueAnchoCraneo']} & \py{m_variables_modelo[0]['PrAnchoCraneo']} \\
    \hline
    \end{tabular}
    \end{adjustbox}
    \\[10pt]
    Resultados obtenidos del archivo \texttt{tabla\_mejores\_modelos.csv}.
    \label{modeloLogistico}
\end{table}

%Agrega valores de .json

\begin{table}[h]
    \centering
    \caption{Variables predictoras obtenidas después de la normalizacion según la ecuación (\ref{normalizacion}) para principales componentes de análisis de ($n$=135) albatros de Laysan en Isla Guadalupe desde 2014-2018.}
    \bigskip
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|c|c|c|c|}
    \hline
    \textbf{Morfometría} & \textbf{Valor Mínimo} & \textbf{Valor Máximo} & \textbf{Valor Estimado}\\
    \hline
    (Intercept) & - & - & \py{m_intercept["Estimate"]} \\
    \hline
    Longitud Craneo & \py{m_valor_minimo["Longitud_Craneo"][0]} & \py{m_valor_maximo["Longitud_Craneo"][0]} & \py{m_longitud_craneo["Estimate"]} \\
    \hline
    Altura Pico & \py{m_valor_minimo["Altura_Pico"][0]} & \py{m_valor_maximo["Altura_Pico"][0]} & \py{m_altura_pico["Estimate"]} \\
    \hline
    Longitud Pico & \py{m_valor_minimo["Longitud_Pico"][0]} & \py{m_valor_maximo["Longitud_Pico"][0]}& \py{m_longitud_pico["Estimate"]} \\
    \hline
    Tarso & \py{m_valor_minimo["Tarso"][0]} & \py{m_valor_maximo["Tarso"][0]}& \py{m_tarso["Estimate"]} \\
    \hline
    \end{tabular}
    \label{mejorModeloLogistico}
    \\[10pt]
    Resultados obtenidos del archivo \texttt{parametros\_mejor\_modelo\_logistico\_laal\_ig.json}.
\end{table}
\end{flushleft}
\end{document}
