\documentclass{article}
\usepackage{vmargin}
\usepackage{graphicx}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amssymb, amsmath, amsbsy} % simbolitos
\usepackage{upgreek} % para poner letras griegas sin cursiva
\usepackage{cancel} % para tachar
\usepackage{mathdots} % para el comando \iddots
\usepackage{mathrsfs} % para formato de letra
\usepackage{stackrel} % para el comando \stackbin
\usepackage{csvsimple}
\usepackage{pythontex}
\setpapersize{A4}

\begin{pycode}
import json

data_processed_1 = '../data/processed/parametros_mejor_modelo_logistico_laal_ig.json'
with open(data_processed_1, encoding='utf8') as results_1_file:
    parametros_mejor = json.load(results_1_file)

##Declaro variables a utilizar 
##Primer archivo
m_variables_normalizacion = parametros_mejor ["parametrosNormalizacion"]
m_valor_minimo = m_variables_normalizacion ["valorMinimo"]
m_valor_maximo = m_variables_normalizacion ["valorMaximo"]

m_variables_modelo = parametros_mejor["parametrosModelo"]
m_longitud_craneo = m_variables_modelo[1]
m_altura_pico = m_variables_modelo[2]
m_longitud_pico = m_variables_modelo[3]
m_tarso = m_variables_modelo [4]

#Segudo archivo
data_processed_2 = '../data/processed/parametros_modelo_logistico_laal_ig.json'
with open(data_processed_2, encoding='utf8') as results_2_file:
    parametros_modelos = json.load(results_2_file)

variables_normalizacion = parametros_mejor ["parametrosNormalizacion"]
valor_minimo = variables_normalizacion ["valorMinimo"]
valor_maximo = variables_normalizacion ["valorMaximo"]

variables_modelo = parametros_modelos["parametrosModelo"]
longitud_craneo = variables_modelo[1]
altura_pico = variables_modelo[2]
longitud_pico = variables_modelo[3]
tarso = variables_modelo [4]

\end{pycode}

\begin{document}

\title{Ecuación Logística}

\maketitle

Teniendo la ecuación logística:
\begin{equation}
    \label{tripe_igualdad_sencilla}
    \frac{1}{1+e^{-z}} = \frac{1}{1+\mbox{\mbox{exp}}\left ( -z\right )} = \frac{1}{1+\mbox{\mbox{exp}}\left (-\sum_{i=0}^{n} \beta _{i}N_{i} \right )}
\end{equation}

Donde, al tener que $N_{0}=1$, entonces la ecuación \ref{tripe_igualdad_sencilla} puede ser expandida de la forma:
\begin{equation}
    \label{ecuacion_expandida}
    \frac{1}{1+\mbox{exp}\left (-\sum_{i=0}^{n} \beta _{i}N_{i} \right )} = \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N_{1}+...+\beta_{n}N_{n} \right ) \right ]}
\end{equation}

Donde \ref{ecuacion_expandida} puede ser reescrito de la forma:
\begin{equation}
    \label{ecuacion_expandida_reescrita}    
    \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N_{1}+...+\beta_{n}N_{n} \right ) \right ]} = \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}N(x_{1})+...+\beta_{n}N(x_{n})\right ) \right ]}
\end{equation}

Notemos que en \ref{ecuacion_expandida_reescrita} la normalización $N$ depende de un $x_{i}$. Definimos $A_{i}$ y $B_{i}$ como:

\begin{equation}
    \label{maximos_A}
    A_{i}= \underset{j\in \left \{ 1,...,m \right \}}{\mbox{mín}}\left ( x_{i}^{j} \right )
\end{equation}

\begin{equation}
    \label{minimos_B}
    B_{i}= \underset{j\in \left \{ 1,...,m \right \}}{\mbox{máx}}\left ( x_{i}^{j} \right )
\end{equation}

Donde, en este caso, el superíndice $j$ representa el j-ésimo individuo del conjunto de $m$ albatros, mientras que el subíndice $i$ simboliza la i-ésima anatomía en medición.

Por lo tanto, sea 
\begin{equation} \label{normalizacion} N\left ( x_{i} \right )= \frac{x_{i} - \underset{j\in [m ]}{\mbox{mín}}\left (  x_{i}^{j}\right )}{\underset{j\in [m ]}{\mbox{máx}}\left (  x_{i}^{j}\right )-\underset{j\in [m ]}{\mbox{mín}}\left (  x_{i}^{j}\right )}
\end{equation}

Sustituyendo \ref{normalizacion} en \ref{ecuacion_expandida_reescrita} tenemos que: 
\begin{equation} \label{ecuacion_chorizo}
    \frac{1}{1+\mbox{exp}\left [ -\left ( \beta _{0} + \beta _{1}\frac{x_{1}- \underset{j\in [m]}{\mbox{mín}}\left (x_{1}^{j}\right )}{\underset{j\in [m ]}{\mbox{máx}}\left (x_{1}^{j}\right )-\underset{j\in [m]}{\mbox{mín}}\left (  x_{1}^{j}\right )}+...+\beta_{n}\frac{x_{n} - \underset{j\in [m]}{\mbox{mín}}\left (  x_{n}^{j}\right )}{\underset{j\in [m]}{\mbox{máx}}\left (  x_{n}^{j}\right )-\underset{j\in [m]}{\mbox{mín}}\left (  x_{n}^{j}\right )}\right ) \right ]}
\end{equation}

\newpage

%Agregar resultados al docuemento

%Agregar valores de .csv


\newpage

%Agrega valores de .json

En la \ref{modeloLogistico} se muestran los valores estimados de las direntes morfometrias en el archivo:

\begin{table}[h]
    \centering
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|c|c|c|c|}
    \hline
    Morfometría & Valor Mínimo & Valor Máximo & Valor Estimado\\
    \hline
    Longitud Craneo & \py{valor_minimo["longitudCraneo"][0]} & \py{valor_maximo["longitudCraneo"][0]} & \py{longitud_craneo["Estimate"]} \\
    \hline
    Altura Pico & \py{valor_minimo["altoPico"][0]} & \py{valor_maximo["altoPico"][0]} & \py{altura_pico["Estimate"]} \\
    \hline
    Longitud Pico & \py{valor_minimo["longitudPico"][0]} & \py{valor_maximo["longitudPico"][0]} & \py{longitud_pico["Estimate"]} \\
    \hline
    Tarso & \py{valor_minimo["tarso"][0]} & \py{valor_maximo["tarso"][0]} & \py{tarso["Estimate"]} \\
    \hline
    \end{tabular}
    \label{modeloLogistico}
\end{table}


En la \ref{mejorModeloLogistico} se muestran los valores estimados de las direntes morfometrias en el archivo .json :

\begin{table}[htbp]
    \centering
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|c|c|c|c|}
    \hline
    Morfometría & Valor Mínimo & Valor Máximo & Valor Estimado\\
    \hline
    Longitud Craneo & \py{m_valor_minimo["longitudCraneo"][0]} & \py{m_valor_maximo["longitudCraneo"][0]} & \py{m_longitud_craneo["Estimate"]} \\
    \hline
    Altura Pico & \py{m_valor_minimo["altoPico"][0]} & \py{m_valor_maximo["altoPico"][0]} & \py{m_altura_pico["Estimate"]} \\
    \hline
    Longitud Pico & \py{m_valor_minimo["longitudPico"][0]} & \py{m_valor_maximo["longitudPico"][0]}& \py{m_longitud_pico["Estimate"]} \\
    \hline
    Tarso & \py{m_valor_minimo["tarso"][0]} & \py{m_valor_maximo["tarso"][0]}& \py{m_tarso["Estimate"]} \\
    \hline
    \end{tabular}
    \label{mejorModeloLogistico}
\end{table}

\end{document}